import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;

import org.junit.jupiter.api.Test;

public class DepartmentTest {

	public DepartmentTest() {
		// TODO Auto-generated constructor stub
	}
	
	@Test
	public void insertTest() {
		
		EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("MyJPA");
		System.out.println("entityManagerFactory ::"+entityManagerFactory);
		
		EntityManager entityManager = entityManagerFactory.createEntityManager();
		System.out.println("Entity Managaer ::"+entityManager);
		
		EntityTransaction entityTransaction = entityManager.getTransaction();
		entityTransaction.begin();
		Department department = new Department();
		department.setDepartmentNumber(69);
		department.setDepartmentName("Java Training");
		department.setDepartmentLocation("MDC");
		entityManager.persist(department);
		entityTransaction.commit();
		

	}
	
	@Test
	public void selectTest() {
		
		EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("MyJPA");
		System.out.println("entityManagerFactory ::"+entityManagerFactory);
		
		EntityManager entityManager = entityManagerFactory.createEntityManager();
		System.out.println("Entity Managaer ::"+entityManager);
		
		
		Department department = entityManager.find(Department.class, 50);
		System.out.println("Dept No "+department.getDepartmentNumber());
		System.out.println("Dept Name "+department.getDepartmentName());
		System.out.println("Dept Location "+department.getDepartmentLocation());
		
		

	}
	
	@Test
	public void updateTest() {
		
		EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("MyJPA");
		System.out.println("entityManagerFactory ::"+entityManagerFactory);
		
		EntityManager entityManager = entityManagerFactory.createEntityManager();
		System.out.println("Entity Managaer ::"+entityManager);
		
		EntityTransaction entityTransaction = entityManager.getTransaction();
		entityTransaction.begin();
			Department department = entityManager.find(Department.class, 50);
			System.out.println("Dept No "+department.getDepartmentNumber());
			System.out.println("Dept Name "+department.getDepartmentName());
			System.out.println("Dept Location "+department.getDepartmentLocation());
			
			department.setDepartmentName("Python Training");
			department.setDepartmentLocation("SDC");
		entityManager.merge(department);
		entityTransaction.commit();
		

	}

}
